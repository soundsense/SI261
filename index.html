<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Standard Deviation Playground (Grade 5)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { margin:0; font-family: system-ui, sans-serif; background:#f8fafc; color:#0f172a; }
    .wrap { max-width: 960px; margin: 0 auto; padding: 24px; }
    h1 { color:#0369a1; margin:0 0 8px; }
    .card { background:#fff; border:1px solid #e5e7eb; border-radius: 12px; padding: 16px; margin: 16px 0; box-shadow:0 1px 4px rgba(0,0,0,0.05); }
    .pill { display:inline-block; background:#e0f2fe; padding:6px 10px; border-radius:999px; margin:3px; font-weight:600; }
    table { width:100%; border-collapse: collapse; margin-top:12px; }
    th, td { border:1px solid #e5e7eb; padding:8px; text-align:center; }
    th { background:#f1f5f9; }
    input { width:90px; max-width:28vw; padding:4px; border:1px solid #e5e7eb; border-radius:6px; text-align:center; }
    .btn { background:#0369a1; color:#fff; border:0; border-radius:6px; padding:6px 12px; cursor:pointer; margin-top:8px; }
    .result { margin-top:6px; padding:6px; background:#f8fafc; border:1px solid #e5e7eb; border-radius:6px; }
    .success { background:#ecfdf5; border:1px solid #bbf7d0; color:#065f46; border-radius:8px; padding:10px; margin-top:12px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Standard Deviation Playground</h1>

    <!-- (Optional) Short formula refresher -->
    <section class="card">
      <h2>What does the formula mean?</h2>
      <p class="mono">s = ‚àö( Œ£ (x·µ¢ ‚àí xÃÑ)¬≤ √∑ (n ‚àí 1) )</p>
      <ul>
        <li><b>x·µ¢</b>: each number ‚Ä¢ <b>xÃÑ</b>: mean (average) ‚Ä¢ <b>n</b>: how many numbers ‚Ä¢ <b>Œ£</b>: add them all</li>
        <li><b>In words:</b> subtract the mean from each number, square it, add them all, divide by n‚àí1, then take the square root.</li>
      </ul>
    </section>

    <!-- Example (kept the same) -->
    <section class="card">
      <h2>Example Walkthrough</h2>
      <p>Numbers:
        <span class="pill">3</span><span class="pill">5</span>
        <span class="pill">8</span><span class="pill">2</span>
        <span class="pill">7</span>
      </p>
      <p><b>Mean (xÃÑ) = 5.00</b></p>
      <table>
        <thead>
          <tr><th>x·µ¢</th><th>x·µ¢ ‚àí mean</th><th>(x·µ¢ ‚àí mean)¬≤</th></tr>
        </thead>
        <tbody>
          <tr><td>3</td><td>-2.00</td><td>4.00</td></tr>
          <tr><td>5</td><td>0.00</td><td>0.00</td></tr>
          <tr><td>8</td><td>3.00</td><td>9.00</td></tr>
          <tr><td>2</td><td>-3.00</td><td>9.00</td></tr>
          <tr><td>7</td><td>2.00</td><td>4.00</td></tr>
        </tbody>
        <tfoot>
          <tr><th colspan="2">Sum of squares</th><th>26.00</th></tr>
        </tfoot>
      </table>
      <p>Variance = 26 √∑ 4 = 6.50</p>
      <p>Standard deviation = ‚àö6.50 = 2.55</p>
    </section>

    <!-- Practice (new numbers) -->
    <section class="card">
      <h2>Practice Yourself</h2>
      <p>Numbers:
        <span class="pill">4</span><span class="pill">6</span>
        <span class="pill">9</span><span class="pill">3</span>
        <span class="pill">8</span>
      </p>

      <!-- Step 1 -->
      <p><b>Step 1: Mean</b></p>
      <div class="mono">
        mean = (4 + 6 + 9 + 3 + 8) √∑ 5 =
        <input id="meanInput" type="number" step="0.01" placeholder="your mean">
        <button class="btn" onclick="checkMean()">Check Mean</button>
      </div>
      <div id="meanOut" class="result"></div>

      <!-- Step 2‚Äì3 table (blank) -->
      <p><b>Step 2‚Äì4: Differences, Squares, and Sum</b></p>
      <table>
        <thead>
          <tr><th>x·µ¢</th><th>x·µ¢ ‚àí mean</th><th>(x·µ¢ ‚àí mean)¬≤</th></tr>
        </thead>
        <tbody>
          <tr><td>4</td><td><input id="d1" placeholder="diff"></td><td><input id="s1" placeholder="square"></td></tr>
          <tr><td>6</td><td><input id="d2" placeholder="diff"></td><td><input id="s2" placeholder="square"></td></tr>
          <tr><td>9</td><td><input id="d3" placeholder="diff"></td><td><input id="s3" placeholder="square"></td></tr>
          <tr><td>3</td><td><input id="d4" placeholder="diff"></td><td><input id="s4" placeholder="square"></td></tr>
          <tr><td>8</td><td><input id="d5" placeholder="diff"></td><td><input id="s5" placeholder="square"></td></tr>
        </tbody>
        <tfoot>
          <tr><th colspan="2">Sum of squares</th><th><input id="sumSquares" placeholder="total"></th></tr>
        </tfoot>
      </table>
      <button class="btn" onclick="checkTable()">Check Table</button>
      <div id="tableOut" class="result"></div>

      <!-- Step 4‚Äì5: Variance with two blanks -->
      <p><b>Step 5: Variance</b></p>
      <div class="mono">
        Variance =
        (<input id="varSS" placeholder="sum of squares"> √∑
        <input id="varDen" placeholder="n‚àí1">)
        <button class="btn" onclick="computeVariance()">Compute Variance</button>
      </div>
      <div id="varOut" class="result"></div>

      <!-- Step 6: SD with compute then answer -->
      <p><b>Step 6: Standard Deviation</b></p>
      <div class="mono">
        Enter variance:
        <input id="sdVar" placeholder="variance">
        <button class="btn" onclick="computeSD()">Compute SD</button>
      </div>
      <div id="sdCalc" class="result"></div>
      <div class="mono" style="margin-top:8px;">
        Answer = <input id="sdInput" placeholder="type your SD">
        <button class="btn" onclick="checkSD()">Check Answer</button>
      </div>
      <div id="sdOut" class="result"></div>

      <div id="congrats" class="success" style="display:none;">
        üéâ Great job! You found the standard deviation.
      </div>

      <div style="margin-top:12px;">
        <button class="btn" onclick="resetPractice()">Reset All Inputs</button>
      </div>
    </section>
  </div>

  <script>
    // Correct answers for PRACTICE: 4, 6, 9, 3, 8
    const correct = {
      mean: 6.00,
      diffs: [-2, 0, 3, -3, 2],
      squares: [4, 0, 9, 9, 4],
      sumSquares: 26,
      variance: 6.5,
      sd: 2.55
    };
    const tol = 0.01;
    const close = (a,b)=>Math.abs(a-b)<=tol;

    function checkMean(){
      const val = parseFloat(document.getElementById('meanInput').value);
      document.getElementById('meanOut').textContent =
        close(val, correct.mean) ? "‚úÖ Correct! Mean = 6.00" : "‚ùå Try again.";
    }

    function checkTable(){
      let ok = true;
      ['d1','d2','d3','d4','d5'].forEach((id,i)=>{
        const v = parseFloat(document.getElementById(id).value);
        if(!close(v, correct.diffs[i])) ok = false;
      });
      ['s1','s2','s3','s4','s5'].forEach((id,i)=>{
        const v = parseFloat(document.getElementById(id).value);
        if(!close(v, correct.squares[i])) ok = false;
      });
      const ss = parseFloat(document.getElementById('sumSquares').value);
      if(!close(ss, correct.sumSquares)) ok = false;

      document.getElementById('tableOut').textContent = ok ? "‚úÖ Table correct!" : "‚ùå Check differences/squares/total.";
    }

    function computeVariance(){
      const ss = parseFloat(document.getElementById('varSS').value);
      const den = parseFloat(document.getElementById('varDen').value);
      const out = document.getElementById('varOut');
      if(Number.isNaN(ss) || Number.isNaN(den) || den === 0){
        out.textContent = "‚ùå Please enter both numbers (and n‚àí1 can‚Äôt be 0).";
        return;
      }
      const v = ss / den;
      out.textContent = "Variance = " + v.toFixed(2);
      // convenience: prefill SD variance input
      document.getElementById('sdVar').value = v.toFixed(2);
    }

    function computeSD(){
      const v = parseFloat(document.getElementById('sdVar').value);
      const out = document.getElementById('sdCalc');
      if(Number.isNaN(v) || v < 0){
        out.textContent = "‚ùå Please enter a non-negative variance.";
        return;
      }
      const sd = Math.sqrt(v);
      out.textContent = "‚àö" + v.toFixed(2) + " = " + sd.toFixed(2);
    }

    function checkSD(){
      const val = parseFloat(document.getElementById('sdInput').value);
      const out = document.getElementById('sdOut');
      if(close(val, correct.sd)){
        out.textContent = "‚úÖ SD correct!";
        document.getElementById('congrats').style.display = "block";
      } else {
        out.textContent = "‚ùå Try again.";
        document.getElementById('congrats').style.display = "none";
      }
    }

    function resetPractice(){
      [
        'meanInput','d1','d2','d3','d4','d5','s1','s2','s3','s4','s5',
        'sumSquares','varSS','varDen','sdVar','sdInput'
      ].forEach(id => { const el = document.getElementById(id); if(el) el.value = ""; });
      ['meanOut','tableOut','varOut','sdCalc','sdOut'].forEach(id => {
        const el = document.getElementById(id); if(el) el.textContent = "";
      });
      document.getElementById('congrats').style.display = "none";
    }
  </script>
</body>
</html>
